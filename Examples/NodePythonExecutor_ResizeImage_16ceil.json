{"last_node_id":124,"last_link_id":231,"nodes":[{"id":92,"type":"easy imageSize","pos":[1250,690],"size":[210,108],"flags":{},"order":2,"mode":0,"inputs":[{"name":"image","localized_name":"图像","label":"image","type":"IMAGE","link":224}],"outputs":[{"name":"width_int","localized_name":"宽度","label":"width_int","type":"INT","links":null},{"name":"height_int","localized_name":"高度","label":"height_int","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"45d5c08bbb354bcc7427a7774140e5aa4a2989cb","Node name for S&R":"easy imageSize"},"widgets_values":["Width: 768 , Height: 768"]},{"id":121,"type":"easy showAnything","pos":[2000,820],"size":[210,88],"flags":{},"order":5,"mode":0,"inputs":[{"name":"anything","localized_name":"输入任何","label":"anything","type":"*","shape":7,"link":226}],"outputs":[{"name":"output","localized_name":"output","label":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"45d5c08bbb354bcc7427a7774140e5aa4a2989cb","Node name for S&R":"easy showAnything"},"widgets_values":["1024"]},{"id":122,"type":"easy imageSize","pos":[2000,960],"size":[210,108],"flags":{},"order":7,"mode":0,"inputs":[{"name":"image","localized_name":"图像","label":"image","type":"IMAGE","link":230}],"outputs":[{"name":"width_int","localized_name":"宽度","label":"width_int","type":"INT","links":null},{"name":"height_int","localized_name":"高度","label":"height_int","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"45d5c08bbb354bcc7427a7774140e5aa4a2989cb","Node name for S&R":"easy imageSize"},"widgets_values":["Width: 1024 , Height: 1024"]},{"id":113,"type":"PreviewImage","pos":[2000,1110],"size":[210,246],"flags":{},"order":6,"mode":0,"inputs":[{"name":"images","localized_name":"图像","label":"images","type":"IMAGE","link":229}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.27","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":114,"type":"easy showAnything","pos":[2000,690],"size":[210,88],"flags":{},"order":4,"mode":0,"inputs":[{"name":"anything","localized_name":"输入任何","label":"anything","type":"*","shape":7,"link":227}],"outputs":[{"name":"output","localized_name":"output","label":"output","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"45d5c08bbb354bcc7427a7774140e5aa4a2989cb","Node name for S&R":"easy showAnything"},"widgets_values":["1024"]},{"id":123,"type":"easy int","pos":[920,1210],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"int","localized_name":"整数","label":"int","type":"INT","links":[231]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"45d5c08bbb354bcc7427a7774140e5aa4a2989cb","Node name for S&R":"easy int"},"widgets_values":[1024]},{"id":120,"type":"LoadImage","pos":[920,860],"size":[315,314],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","localized_name":"图像","label":"IMAGE","type":"IMAGE","links":[224,225]},{"name":"MASK","localized_name":"遮罩","label":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"LoadImage"},"widgets_values":["example.png","image"]},{"id":112,"type":"NodePython","pos":[1490,860],"size":[410,680],"flags":{},"order":3,"mode":0,"inputs":[{"name":"anyA","localized_name":"anyA","label":"anyA","type":"*","shape":7,"link":225},{"name":"anyB","localized_name":"anyB","label":"anyB","type":"*","shape":7,"link":231},{"name":"anyC","localized_name":"anyC","label":"anyC","type":"*","shape":7,"link":null},{"name":"anyD","localized_name":"anyD","label":"anyD","type":"*","shape":7,"link":null},{"name":"anyE","localized_name":"anyE","label":"anyE","type":"*","shape":7,"link":null},{"name":"anyF","localized_name":"anyF","label":"anyF","type":"*","shape":7,"link":null}],"outputs":[{"name":"num1","localized_name":"num1","label":"num1","type":"*","links":[227],"slot_index":0},{"name":"num2","localized_name":"num2","label":"num2","type":"*","links":[226],"slot_index":1},{"name":"text1","localized_name":"text1","label":"text1","type":"*","links":null},{"name":"text2","localized_name":"text2","label":"text2","type":"*","links":null},{"name":"any1","localized_name":"any1","label":"any1","type":"*","links":[229,230],"slot_index":4},{"name":"any2","localized_name":"any2","label":"any2","type":"*","links":[]},{"name":"any3","localized_name":"any3","label":"any3","type":"*","links":[]}],"properties":{"Node name for S&R":"NodePython"},"widgets_values":["## Resizes image tensor based on target short side, ensuring dimensions are multiples of 16 (ceil).\n## 根据目标短边调整图像张量大小，确保尺寸为16的倍数（向上取整）。\n\n# --- Imports / 导入 ---\nimport torch\nimport math\n\n# --- Function Definition / 函数定义 ---\ndef resize_image_core(image_tensor, target_short_side):\n    # Calculate New Dimensions / 计算新尺寸\n    _batch, original_height, original_width, _channels = image_tensor.shape\n\n    if original_height <= original_width:\n        scale_factor = target_short_side / original_height\n        new_height = target_short_side\n        new_width = original_width * scale_factor\n    else:\n        scale_factor = target_short_side / original_width\n        new_width = target_short_side\n        new_height = original_height * scale_factor\n\n    # Ensure Multiple of 16 (Ceiling) / 确保16倍数 (向上取整)\n    final_width = int(math.ceil(new_width / 16.0) * 16)\n    final_height = int(math.ceil(new_height / 16.0) * 16)\n\n    # Resize Image Tensor / 调整图像张量大小\n    resized_tensor_bhwc = torch.nn.functional.interpolate(\n        image_tensor.permute(0, 3, 1, 2), # BHWC -> NCHW\n        size=(final_height, final_width),\n        mode='bicubic',\n        align_corners=False\n    ).permute(0, 2, 3, 1) # NCHW -> BHWC\n\n    return final_width, final_height, resized_tensor_bhwc\n\n\n# --- Main Execution Logic / 主要执行逻辑 ---\nwidth_out, height_out, image_out = resize_image_core(anyA, int(anyB))\n# --- Assign Outputs for Node / 为节点分配输出 ---\nnum1 = width_out\nnum2 = height_out\nany1 = image_out",[false,true]]}],"links":[[224,120,0,92,0,"IMAGE"],[225,120,0,112,0,"*"],[226,112,1,121,0,"*"],[227,112,0,114,0,"*"],[229,112,4,113,0,"IMAGE"],[230,112,4,122,0,"IMAGE"],[231,123,0,112,1,"*"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.45,"offset":[340.55555555555543,-231.1111111111111]},"node_versions":{"comfy-core":"v0.3.10-33-g7da85fa","python-interpreter-node":"ac2547ada25643be7cfe4b8030e57059c9da5bd7"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"ue_links":[]},"version":0.4}